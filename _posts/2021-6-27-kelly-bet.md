---
title: 赔率，胜率与凯利公式
author: Stephen
layout: post
tags:
    - 风险
    - 投资
---

<img src="/assets/imgs/kelly.jpeg" alt="kelly bet" class="headimg" />

欧洲杯激战正酣，足彩竞猜也非常火热，赔率胜率冲上热词。赔率是博彩公司从总赌资中收取手续费后剩下的部分当作奖金与下游情况计算出来的收益率。

<!--more-->

<img src="/assets/imgs/kelly2.jpeg" alt="kelly bet" />



赔率是根据已有的筹码分布计算出来的，也就是说赔率越低说明押注的筹码越多，大家认为胜率也就越高。比如这张欧洲杯的夺冠赔率，从中可见，押注法国赔率最小但是胜率最高；英格兰则是回报最大但是胜率极低。面对这样的胜率和赔率该如何下注。



中国和巴西比赛显然押注中国且中国获胜可以获得超额回报，但是任何一个理智的人都知道这种可能性几乎不存在，所以正确的做法是重注押巴西，如果想找点乐子可以在中国队身下点小注。



# 期权中的胜率和赔率

期权中有4种单腿策略，在提到这几种策略时最常被提及的是买入期权损失有限风险无限，而卖出期权则相反是收益有限而风险无限。如果买卖双方面临着如此大的不公平地位为什么还会有人愿意卖出期权？其中原因就是这只从赔率的角度来看待买卖双方而忽略了胜率这个重要的维度。



如果从赔率和胜率两个角度一起来看待期权买卖双方交换的是盈亏的不对称性和胜率的不对称性。在盈亏上占到便宜就会在胜率上吃亏。所以对于四种单腿操作，买入期权是低胜率高赔率，而卖出期权是高胜率低赔率。



# 凯利公式

高收益高风险，这可算得上常识，但是我们依然可以通过控制仓位的办法在追求高收益的同时来控制风险。比如说对于胜率极低的彩票，可能每周只买一注；对于可能一夜暴富的空气币，只能投入归零也对自己没有影响的仓位；开几十甚至百倍做合约，动用的资金一定要输光都不在乎。比如我知道一位投资人持有大量的比特币，但是在他没有将其变现之前他永远不把这项资产计入自己的净值。



以上是基于常识和直觉的判断，那么有没有一种可以通过数字和量化的方法来指导仓位呢。这就要搬出著名的凯利公式。



凯利公式是一个根据赔率来计算最佳投注比例，以此来获得最高赌博投资收益的公式。这是一个在保证不会丢掉老本的前提下把复利收益提升到最高的神奇公式。

$f=\frac{bp-q}{b}=\frac{p(b+1)-1}{b}$

其中

* f为现有资金应进行下次投注的比例；
* b为投注可得的赔率（不含本金）；
* p为获胜率；
* q为落败率，即1 - p；


这个公式看起来简单易懂但是对于复杂的金融市场却未必完全适用。

* b和p对于金融市场的标的来说没有一个人可以给出准确值，估值是一种艺术而非科学。金融市场的盘口远比足彩要复杂得多。
* 这个公式有一些隐含条件：投资是要在多次（大数）基础上进行，而且，b与p在每次的投资中保持不变。而现实的投资中b和p在每次机会出现时都不可能一样。
* 对于金融市场，这个公式缺了一个重要的因素就是时间，在多长时间内可以兑现胜率。


投资无法像公式一样严谨，但是它还是从数学角度为我们感性的风险仓位控制提供了理论上的参考依据。

* 期望值为0或者负值时，不值得下注。
* 期望值为正时，凯利公式能给到每次最优的下注比例。
* 除了100%赢，任何时候都不应下全部赌注，即使赢的概率高达99.9%。